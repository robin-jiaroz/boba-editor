(this["webpackJsonpboba-editor"]=this["webpackJsonpboba-editor"]||[]).push([[0],{130:function(e,t,o){},150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAA2AgMAAADynIxmAAAADFBMVEX///9cPo/RpzqTlZebCIGjAAAAPklEQVQ4y2MgFvD//wBhsIYGMHCtWjHYxEgDCL1DSoyIOBINDQgNheodbGIk+gMeBkNBjNw40lrVMKjEiAQA922+JUlcQv4AAAAASUVORK5CYII="},183:function(e,t,o){e.exports=o(393)},189:function(e,t,o){},310:function(e,t,o){},311:function(e,t,o){},391:function(e,t,o){},393:function(e,t,o){"use strict";o.r(t);var n=o(0),l=o.n(n),c=o(35),a=o.n(c),i=o(92),s=o.n(i),r=o(149),d=o(173),p=o(16),k=o(19),u=o(20),m=o(22),b=o(21),B=(o(189),o(400)),g=o(150),h=o.n(g),v=[{key:1,text:"Normal Block",value:"Normal Block"},{key:2,text:"Decision Block",value:"Decision Block"}],f=[{key:1,text:"Boba Config",value:"Boba Config"}],y=[{key:1,text:"python",value:"python"},{key:2,text:"java",value:"java"},{key:3,text:"javascript",value:"javascript"},{key:4,text:"json",value:"json"},{key:5,text:"matlab",value:"matlab"},{key:6,text:"r",value:"r"}],S=[{key:1,text:"json",value:"json"}],C=function(e){Object(m.a)(o,e);var t=Object(b.a)(o);function o(){var e;Object(k.a)(this,o);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).onLogoClickHandler=function(){window.open("https://idl.cs.washington.edu/")},e.onAboutClickHandler=function(){window.open("https://github.com/uwdata/boba")},e}return Object(u.a)(o,[{key:"render",value:function(){var e,t,o=this;return console.log("TopMenu is rerendered!!"),console.log("current selectedBlockType: "+this.props.selectedBlockType),console.log("current selectedBlockLanguage: "+this.props.selectedBlockLanguage),"Boba Config"===this.props.selectedBlockType?e=l.a.createElement(B.a,{options:f,selection:!0,disabled:!0,value:"Boba Config"}):this.props.selectedBlockType?e=l.a.createElement(B.a,{onChange:this.props.onBlockTypeSelectHandler,options:v,placeholder:"Choose an block type",selection:!0,value:this.props.selectedBlockType}):(console.log("selectedBlockType is undefined"),e=l.a.createElement(B.a,{onChange:this.props.onBlockTypeSelectHandler,options:v,placeholder:"Choose an block type",selection:!0,value:""})),"Boba Config"===this.props.selectedBlockType?t=l.a.createElement(B.a,{options:S,selection:!0,disabled:!0,value:"json"}):this.props.selectedBlockLanguage?t=l.a.createElement(B.a,{onChange:this.props.onBlockLanguageSelectHandler,options:y,placeholder:"Choose an language",selection:!0,value:this.props.selectedBlockLanguage}):(console.log("selectedBlockLanguage is undefined"),t=l.a.createElement(B.a,{onChange:this.props.onBlockLanguageSelectHandler,options:y,placeholder:"Choose an language",selection:!0,value:""})),l.a.createElement("div",{className:"nav-bar"},l.a.createElement("div",{className:"ui fixed menu",style:{position:"relative"}},l.a.createElement("a",{href:"#"},l.a.createElement("div",{className:"item",onClick:this.onLogoClickHandler},l.a.createElement("img",{src:h.a,alt:"Boba Editor Logo"}))),l.a.createElement(B.a,{text:"File",pointing:!0,className:"link item"},l.a.createElement(B.a.Menu,null,l.a.createElement(B.a.Item,{onClick:this.props.onDownloadClickHandler},"Download"),l.a.createElement(B.a.Item,{onClick:this.props.onCompileClickHandler},"Compile"))),l.a.createElement(B.a,{text:"Edit",pointing:!0,className:"link item"},l.a.createElement(B.a.Menu,null,l.a.createElement(B.a.Item,null,"Copy Block"),l.a.createElement(B.a.Item,{onClick:function(){return o.props.removeBlockHandler(o.props.selectedBlock)}},"Delete Block"),l.a.createElement(B.a.Item,{onClick:this.props.moveSelectedBlockUpHandler},"Move Block Up"),l.a.createElement(B.a.Item,{onClick:this.props.moveSelectedBlockDownHandler},"Move Block Down"))),l.a.createElement(B.a,{text:"Insert",pointing:!0,className:"link item"},l.a.createElement(B.a.Menu,null,l.a.createElement(B.a.Item,{onClick:this.props.insertBlockAboveHandler},"Insert Block Above"),l.a.createElement(B.a.Item,{onClick:this.props.insertBlockBelowHandler},"Insert Block Below"))),l.a.createElement(B.a,{text:"Help",pointing:!0,className:"link item"},l.a.createElement(B.a.Menu,null,l.a.createElement(B.a.Item,{onClick:this.onAboutClickHandler},"About")))),l.a.createElement("div",{className:"toolbar"},l.a.createElement("button",{className:"ui compact icon button",title:"insert block below",onClick:this.props.insertBlockBelowHandler},l.a.createElement("i",{className:"plus icon"})),l.a.createElement("button",{className:"ui compact icon button",title:"move selected block down",onClick:this.props.moveSelectedBlockDownHandler},l.a.createElement("i",{className:"arrow down icon"})),l.a.createElement("button",{className:"ui compact icon button",title:"move selected block up",onClick:this.props.moveSelectedBlockUpHandler},l.a.createElement("i",{className:"arrow up icon"})),l.a.createElement("button",{className:"ui compact icon button",title:"delete selected block",onClick:function(){return o.props.removeBlockHandler(o.props.selectedBlock)}},l.a.createElement("i",{className:"trash alternate icon"})),l.a.createElement("button",{className:"ui compact icon button",title:"copy selected block",onClick:this.props.copySelectedBlockHandler},l.a.createElement("i",{className:"copy outline icon"})),l.a.createElement("button",{className:"ui compact icon button",title:"paste block below",onClick:this.props.pasteBlockBelowHanlder},l.a.createElement("i",{className:"paste icon"})),e," ",t))}}]),o}(l.a.Component),H=(l.a.Component,o(130),o(310),o(311),o(167)),E=o.n(H),I=(o(317),o(318),o(319),o(320),o(321),o(322),o(323),o(324),function(e){Object(m.a)(o,e);var t=Object(b.a)(o);function o(){var e;Object(k.a)(this,o);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).editBlockNameHandler=function(){console.log("file name edited hah!");var t=document.getElementById(e.props.selectedBlock);t.querySelector(".input > .inner-block-container > .block-name-container > .block-name-wrapper > .saved-block-name").classList.add("hidden"),t.querySelector(".input > .inner-block-container > .block-name-container > .block-name-wrapper > .edit-block-name").classList.remove("hidden")},e.onMouseOverHanlder=function(e){e.target.classList.remove("outline")},e.onMouseLeaveHanlder=function(e){e.target.classList.add("outline")},e.onBlockNameSubmitHandler=function(t){t.preventDefault(),console.log(t.target.querySelector("input").value);for(var o=e.props.blocks.map((function(e){return Object(p.a)({},e)})),n=0;n<o.length;n++)if(e.props.selectedBlock===o[n].id){o[n].title=t.target.querySelector("input").value;break}e.props.onBlocksUpdate(o);var l=document.getElementById(e.props.selectedBlock);l.querySelector(".input > .inner-block-container > .block-name-container > .block-name-wrapper > .saved-block-name").classList.remove("hidden"),l.querySelector(".input > .inner-block-container > .block-name-container > .block-name-wrapper > .edit-block-name").classList.add("hidden")},e.editOptionNameHandler=function(e){var t=document.getElementById(e);console.log(t);var o=t.querySelector(".input > .inner-block-container > .inner-block-tab-container-wrapper > .options-tab-container > .option-tab-selected > .option-name-container");console.log(o),o.querySelector(".saved-option-name").classList.add("hidden"),o.querySelector(".edit-option-name").classList.remove("hidden")},e.onOptionNameSubmitHandler=function(t,o,n){t.preventDefault(),console.log(t.target.querySelector("input").value);for(var l=e.props.blocks.map((function(e){return Object(p.a)({},e)})),c=0;c<l.length;c++)if(o===l[c].id){for(var a=0;a<l[c].options.length;a++)if(n===l[c].options[a].optionId){l[c].options[a].optionTitle=t.target.querySelector("input").value;break}break}e.props.onBlocksUpdate(l);var i=document.getElementById(o).querySelector(".input > .inner-block-container > .inner-block-tab-container-wrapper > .options-tab-container > .option-tab-selected > .option-name-container");i.querySelector(".saved-option-name").classList.remove("hidden"),i.querySelector(".edit-option-name").classList.add("hidden")},e.onDropDownIconClick=function(t){console.log("onDropDownIconClick invoked"),e.props.onBlockDropDownClick(t);var o=document.getElementById(t).querySelector(".input > .inner-block-container > .inner-block-tab-container-wrapper");console.log(o),console.log(o.style.display),o.style.display&&"block"!==o.style.display?(o.style.display="block",console.log("expanded")):(o.style.display="none",console.log("collapsed"))},e.getRenderedContentForEditor=function(e){if(e.blockType&&"Normal Block"!==e.blockType&&"Boba Config"!==e.blockType){for(var t=0;t<e.options.length;t++)if(e.options[t].optionId===e.selectedOption)return e.options[t].optionContent;return"Some bug in getRenderedContentForEditor"}return e.content},e.getModeForEditor=function(e){return e.language?"Boba Config"===e.blockType?"json":e.language:"plain_text"},e}return Object(u.a)(o,[{key:"render",value:function(){var e=this,t=this.props.blocks.map((function(t){var o,n=e.props.expandedBlocks.includes(t.id)?"down":"right",c=e.props.expandedBlocks.includes(t.id)?"collapse":"expand",a=e.props.selectedBlock===t.id?"selected":"unselected",i=e.props.selectedBlock===t.id?"":"invisible",s="Decision Block"===t.blockType?"":"hidden";return"Decision Block"===t.blockType&&(o=t.options.map((function(o){var n=o.optionId===t.selectedOption?"option-tab-selected":"option-tab-unselected",c=o.optionId===t.selectedOption?"":"invisible";return l.a.createElement("div",{key:t.id.toString()+"-"+o.optionId,className:"".concat(n),onClick:function(){return e.props.onOptionTabSelected(t.id,o.optionId)}},l.a.createElement("div",{className:"option-name-container"},l.a.createElement("span",{className:"saved-option-name"},o.optionTitle),l.a.createElement("form",{className:"edit-option-name hidden",onSubmit:function(n){return e.onOptionNameSubmitHandler(n,t.id,o.optionId)}},l.a.createElement("input",{className:"edit-option-name-box",type:"text",placeholder:o.optionTitle}),l.a.createElement("button",null,"Confirm"))),l.a.createElement("i",{className:"edit outline icon edit-option-icon ".concat(c),title:"click to define the name for this option",onClick:function(){return e.editOptionNameHandler(t.id)}}),l.a.createElement("i",{className:"close icon close-option-icon ".concat(c),title:"click to delete this option",onClick:function(n){return e.props.onOptionDeleteHandler(t.id,o.optionId,n)}}))}))),l.a.createElement("div",{key:t.id,id:t.id,className:"block-container ".concat(a),onClick:function(){return e.props.onBlockSelected(t.id)}},l.a.createElement("div",{className:"input"},l.a.createElement("div",{className:"prompt-container"},l.a.createElement("span",{className:"invisible"},l.a.createElement("i",{className:"edit outline icon",title:"click to define the name for this block",onClick:e.editBlockNameHandler,onMouseOver:e.onMouseOverHanlder,onMouseLeave:e.onMouseLeaveHanlder})),l.a.createElement("i",{className:"angle ".concat(n," icon"),title:"click to ".concat(c," this block"),onClick:function(){return e.onDropDownIconClick(t.id)}})),l.a.createElement("div",{className:"inner-block-container"},l.a.createElement("div",{className:"block-name-container"},l.a.createElement("div",{className:"block-name-wrapper"},l.a.createElement("span",{className:"saved-block-name"},t.title),l.a.createElement("form",{className:"edit-block-name hidden",onSubmit:e.onBlockNameSubmitHandler},l.a.createElement("input",{className:"edit-block-name-box",type:"text",placeholder:t.title}),l.a.createElement("button",null,"Confirm"))),l.a.createElement("span",{className:"".concat(i)},l.a.createElement("i",{className:"edit outline icon",title:"click to define the name for this block",onClick:e.editBlockNameHandler,onMouseOver:e.onMouseOverHanlder,onMouseLeave:e.onMouseLeaveHanlder}))),l.a.createElement("div",{className:"inner-block-tab-container-wrapper"},l.a.createElement("div",{className:"options-tab-container ".concat(s)},o,l.a.createElement("i",{className:"plus circle icon",title:"click to add a new option",onClick:function(){return e.props.addOptionWithinBlockHandler(t.id)}})),l.a.createElement(E.a,{onLoad:function(e){e.container.style.lineHeight=1.5},mode:e.getModeForEditor(t),theme:"iplastic",width:"100%",fontSize:14,maxLines:1e4,value:e.getRenderedContentForEditor(t),onChange:function(o){return e.props.onBlockContentChangeHandler(o,t.id)},name:t.id.toString(),editorProps:{$blockScrolling:!0},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0}})))))}));return l.a.createElement("div",null,t)}}]),o}(l.a.Component)),O=function(e){Object(m.a)(o,e);var t=Object(b.a)(o);function o(){return Object(k.a)(this,o),t.apply(this,arguments)}return Object(u.a)(o,[{key:"render",value:function(){return l.a.createElement("div",{className:"ten wide column"},l.a.createElement("div",{className:"ui segment editor"},l.a.createElement(I,{blocks:this.props.blocks,onBlockDropDownClick:this.props.onBlockDropDownClick,expandedBlocks:this.props.expandedBlocks,removeBlockHandler:this.props.removeBlockHandler,onBlockSelected:this.props.onBlockSelected,selectedBlock:this.props.selectedBlock,onBlocksUpdate:this.props.onBlocksUpdate,addOptionWithinBlockHandler:this.props.addOptionWithinBlockHandler,onOptionTabSelected:this.props.onOptionTabSelected,onOptionDeleteHandler:this.props.onOptionDeleteHandler,onBlockContentChangeHandler:this.props.onBlockContentChangeHandler})))}}]),o}(l.a.Component),x=o(168),w=o.n(x),N=o(169),T=o.n(N),D=o(91),L=o.n(D),j=o(66),A=o.n(j),M=o(172),z=(o(391),function(e){Object(m.a)(o,e);var t=Object(b.a)(o);function o(){return Object(k.a)(this,o),t.apply(this,arguments)}return Object(u.a)(o,[{key:"render",value:function(){var e=this,t=parseInt(this.props.consoleSize,10),o=t>30?"down":"up",n=t>30?"collapse":"expand";return l.a.createElement("div",{className:"console-pane"},l.a.createElement("div",{className:"console-bar"},l.a.createElement("span",null,"CONSOLE"),l.a.createElement("i",{className:"angle ".concat(o," icon"),title:"click to ".concat(n," this block"),onClick:function(){"down"===o?e.props.onConsoleSizeChangeHandler("30px"):e.props.onConsoleSizeChangeHandler("250px")}})),l.a.createElement(M.CsvToHtmlTable,{data:this.props.output,csvDelimiter:",",tableClassName:"table table-striped table-hover table-bordered console-output"}))}}]),o}(l.a.Component)),U=function(e){Object(m.a)(o,e);var t=Object(b.a)(o);function o(e){var n;Object(k.a)(this,o),console.log("constructor is invoked!"),(n=t.call(this,e)).onBlocksUpdate=function(e){n.setState({blocks:e}),console.log("onBlocksUpdate invoked"),console.log(n.state.blocks)},n.addBlockHandler=function(){var e=n.state.blocks.map((function(e){return Object(p.a)({},e)}));e.push({id:n.state.nextBlockId,title:"Input Script Block "+n.state.nextBlockId,content:"Please write your script for this block here.",blockType:void 0,language:void 0}),n.onBlockDropDownClick(n.state.nextBlockId),n.setState({blocks:e,nextBlockId:n.state.nextBlockId+1}),console.log(n.state.nextBlockId)},n.addOptionWithinBlockHandler=function(e){for(var t,o=n.state.blocks.map((function(e){return Object(p.a)({},e)})),l=0;l<o.length;l++)if(e===o[l].id){t=l;break}o[t].options.push({optionId:o[t].nextOptionId,optionTitle:"unnamed_option_"+o[t].nextOptionId,optionContent:"Please define your option here."}),o[t].selectedOption=o[t].nextOptionId,o[t].nextOptionId=o[t].nextOptionId+1,n.setState({blocks:o,selectedBlock:e,selectedBlockType:n.state.blocks[t].blockType,selectedBlockLanguage:n.state.blocks[t].language})},n.insertBlockAboveHandler=function(){for(var e=n.state.blocks.map((function(e){return Object(p.a)({},e)})),t=0;t<e.length;t++)if(n.state.selectedBlock===e[t].id){e.splice(t,0,{id:n.state.nextBlockId,title:"unnamed_block_"+n.state.nextBlockId,content:"Please write your script for this block here.",blockType:void 0,language:void 0,options:[]});break}n.onBlockDropDownClick(n.state.nextBlockId),n.setState({blocks:e,nextBlockId:n.state.nextBlockId+1,selectedBlock:n.state.nextBlockId,selectedBlockType:void 0,selectedBlockLanguage:void 0}),console.log(n.state.nextBlockId)},n.insertBlockBelowHandler=function(){for(var e=n.state.blocks.map((function(e){return Object(p.a)({},e)})),t=0;t<e.length;t++)if(n.state.selectedBlock===e[t].id){e.splice(t+1,0,{id:n.state.nextBlockId,title:"unnamed_block_"+n.state.nextBlockId,content:"Please write your script for this block here.",blockType:void 0,language:void 0,options:[]});break}n.onBlockDropDownClick(n.state.nextBlockId),n.setState({blocks:e,nextBlockId:n.state.nextBlockId+1,selectedBlock:n.state.nextBlockId,selectedBlockType:void 0,selectedBlockLanguage:void 0}),console.log(n.state.nextBlockId)},n.moveSelectedBlockUpHandler=function(){for(var e,t=n.state.blocks.map((function(e){return Object(p.a)({},e)})),o=0;o<t.length;o++)n.state.selectedBlock===t[o].id&&(e=o);if(console.log("moveSelectedBlockUpHandler selectedBlockIndex: "+e),e&&0!==e){var l=t[e];t[e]=t[e-1],t[e-1]=l,n.setState({blocks:t})}},n.moveSelectedBlockDownHandler=function(){for(var e,t=n.state.blocks.map((function(e){return Object(p.a)({},e)})),o=0;o<t.length;o++)n.state.selectedBlock===t[o].id&&(e=o);if(console.log("moveSelectedBlockDownHandler selectedBlockIndex: "+e),(e||0===e)&&e!==t.length-1){var l=t[e];t[e]=t[e+1],t[e+1]=l,n.setState({blocks:t})}},n.onBlockDropDownClick=function(e){var t=Object(d.a)(n.state.expandedBlocks);if(t.includes(e))for(var o=0;o<t.length;o++)t[o]===e&&t.splice(o,1);else t.push(e);n.setState({expandedBlocks:t}),console.log(n.state.expandedBlocks)},n.removeBlockHandler=function(e){if(1!==n.state.blocks.length){for(var t,o=0;o<n.state.blocks.length;o++)n.state.selectedBlock===n.state.blocks[o].id&&(t=o);console.log("removeBlockHandler selectedBlockIndex: "+t),t===n.state.blocks.length-1?n.setState({selectedBlock:n.state.blocks[t-1].id}):n.setState({selectedBlock:n.state.blocks[t+1].id});var l=n.state.blocks.filter((function(t){return t.id!==e}));n.setState({blocks:l})}},n.onBlockSelected=function(e){for(var t,o=0;o<n.state.blocks.length;o++)if(e===n.state.blocks[o].id){t=o;break}n.setState({selectedBlock:e,selectedBlockType:n.state.blocks[t].blockType,selectedBlockLanguage:n.state.blocks[t].language}),console.log("onBlockSelected invoked!"),console.log("current selected block id: "+n.state.selectedBlock),console.log("current selectedBlockType: "+n.state.selectedBlockType),console.log("current selectedBlockLanguage: "+n.state.selectedBlockLanguage)},n.onOptionTabSelected=function(e,t){console.log("onOptionTabSelected invoked!");for(var o,l=n.state.blocks.map((function(e){return Object(p.a)({},e)})),c=0;c<l.length;c++)if(e===l[c].id){o=c;break}l[o].selectedOption=t,n.setState({blocks:l,selectedBlock:e,selectedBlockType:n.state.blocks[o].blockType,selectedBlockLanguage:n.state.blocks[o].language})},n.onOptionDeleteHandler=function(e,t,o){console.log("onOptionDeleteHandler invoked!!!"),o.stopPropagation();for(var l=n.state.blocks.map((function(e){return Object(p.a)({},e)})),c=0;c<l.length;c++)if(e===l[c].id){for(var a=void 0,i=0;i<l[c].options.length;i++)if(t===l[c].options[i].optionId){a=i,console.log(i);break}if(console.log(l[c].options[a]),a>0){l[c].selectedOption=l[c].options[a-1].optionId;var s=l[c].options.filter((function(e){return e.optionId!==t}));l[c].options=s,console.log(l[c].options),n.setState({blocks:l,selectedBlock:e,selectedBlockType:l[c].blockType,selectedBlockLanguage:l[c].language})}else if(l[c].options.length>1){l[c].selectedOption=l[c].options[a+1].optionId;var r=l[c].options.filter((function(e){return e.optionId!==t}));l[c].options=r,console.log(l[c].options),n.setState({blocks:l,selectedBlock:e,selectedBlockType:l[c].blockType,selectedBlockLanguage:l[c].language})}else l[c].selectedOption=void 0,l[c].nextOptionId=void 0,l[c].options.pop(),l[c].blockType="Normal Block",n.setState({blocks:l,selectedBlock:e,selectedBlockType:l[c].blockType,selectedBlockLanguage:l[c].language});break}},n.copySelectedBlockHandler=function(){var e=document.getElementById(n.state.selectedBlock).querySelector(".input > .inner-block-container > .inner-block");if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select().createTextRange(),document.execCommand("Copy"),alert("Copied div content to clipboard")}else if(window.getSelection){var o=window.getSelection(),l=document.createRange();l.selectNodeContents(e),o.removeAllRanges(),o.addRange(l),document.execCommand("Copy"),alert("Copied div content to clipboard")}},n.pasteBlockBelowHanlder=function(){n.insertBlockBelowHandler();var e=document.getElementById(n.state.selectedBlock);console.log("current selected block is: "+n.state.selectedBlock);var t=e.querySelector(".input > .inner-block-container > .inner-block");t.focus(),document.execCommand("paste"),console.log(t),console.log("pasted text is: "+t.textContent)},n.onBlockTypeSelectHandler=function(e,t){for(var o,l=t.value,c=n.state.blocks.map((function(e){return Object(p.a)({},e)})),a=0;a<c.length;a++)if(n.state.selectedBlock===c[a].id){o=a;break}"Decision Block"===l?(c[o].blockType=l,c[o].selectedOption=0,c[o].nextOptionId=1,c[o].options.push({optionId:0,optionTitle:"unnamed_option_"+c[o].selectedOption,optionContent:c[o].content}),c[o].content="Please write your script for this block here.",n.setState({blocks:c,selectedBlockType:l})):"Decision Block"===c[o].blockType?c[o].options.length>1?alert("The selected block couldn't be set to Normal Block since there are more than 1 option right now. Please delete to 1 option so that it becomes the Normal Block."):(console.log("could change to Normal Block now."),c[o].blockType=l,c[o].content=c[o].options.pop().optionContent,n.setState({blocks:c,selectedBlockType:l})):(c[o].blockType=l,n.setState({blocks:c,selectedBlockType:l})),console.log("onBlockTypeSelectHandler invoked!!!")},n.onBlockLanguageSelectHandler=function(e,t){for(var o=t.value,l=n.state.blocks.map((function(e){return Object(p.a)({},e)})),c=0;c<l.length;c++)l[c].language=o;n.setState({blocks:l,selectedBlockLanguage:o}),console.log("onBlockLanguageSelectHandler invoked!!!")},n.onBlockContentChangeHandler=function(e,t){console.log("0nBlockContentChangeHandler invoked!!!");for(var o,l=n.state.blocks.map((function(e){return Object(p.a)({},e)})),c=0;c<l.length;c++)if(t===l[c].id){o=c;break}if(l[o].blockType&&"Normal Block"!==l[o].blockType&&"Boba Config"!==l[o].blockType)for(var a=0;a<l[o].options.length;a++)l[o].options[a].optionId===l[o].selectedOption&&(l[o].options[a].optionContent=e);else l[o].content=e;n.setState({blocks:l})},n.onDownloadClickHandler=function(){console.log("onDownloadClickHandler is invoked!!!");var e=n.makeUpScriptFile(),t=new Blob([e],{type:"text/plain;charset=utf-8"}),o="template";"python"===n.state.selectedBlockLanguage?o+=".py":o+="."+n.state.selectedBlockLanguage,w.a.saveAs(t,o)},n.onCompileClickHandler=Object(r.a)(s.a.mark((function e(){var t,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/compile",{script:n.makeUpScriptFile()},{headers:{"Content-Type":"application/json"}});case 2:t=e.sent,console.log(t.data["you sent"]),n.setState({output:t.data["you sent"]}),o=parseInt(n.state.consoleSize,10),console.log("cur console size: "+o),o<250&&n.setState({consoleSize:"250px"});case 8:case"end":return e.stop()}}),e)}))),n.makeUpScriptFile=function(){for(var e="",t=0;t<n.state.blocks.length;t++){var o=n.state.blocks[t];if("Boba Config"===o.blockType)e+="# --- (BOBA_CONFIG)\n"+o.content+"\n# --- (END)\n";else if("Normal Block"===o.blockType)e+="# --- ("+o.title+")\n"+o.content+"\n";else for(var l=0;l<o.options.length;l++){var c=o.options[l];e+="# --- ("+o.title+") "+c.optionTitle+"\n"+c.optionContent+"\n"}}return e},n.onConsoleSizeChangeHandler=function(e){n.setState({consoleSize:e})},n.cleanup=function(){localStorage.setItem("blocks",JSON.stringify(n.state.blocks)),localStorage.setItem("expandedBlocks",JSON.stringify(n.state.expandedBlocks)),localStorage.setItem("nextBlockId",n.state.nextBlockId),localStorage.setItem("selectedBlock",n.state.selectedBlock),localStorage.setItem("selectedBlockType",n.state.selectedBlockType),localStorage.setItem("selectedBlockLanguage",n.state.selectedBlockLanguage),localStorage.setItem("output",n.state.output),localStorage.setItem("consoleSize",n.state.consoleSize)};var l=JSON.parse(localStorage.getItem("blocks"));l||(l=[{id:0,title:"Boba Config",content:"Please define your Boba Config here.",blockType:"Boba Config",language:"json",options:[],selectedOption:void 0,nextOptionId:void 0}]),console.log("blocks from constructor"),console.log(l);var c=JSON.parse(localStorage.getItem("expandedBlocks"));c||(c=[0]),console.log("expandedBlocks from constructor"),console.log(c);var a=localStorage.getItem("nextBlockId"),i=localStorage.getItem("selectedBlock"),u=localStorage.getItem("selectedBlockType"),m=localStorage.getItem("selectedBlockLanguage"),b=localStorage.getItem("output"),B=localStorage.getItem("consoleSize");return n.state={blocks:l,expandedBlocks:c,nextBlockId:a||1,selectedBlock:i||0,selectedBlockType:u||"Boba Config",selectedBlockLanguage:m||"json",output:b||"No output yet. Please compile to see the output.",consoleSize:B||"30px"},n}return Object(u.a)(o,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.cleanup)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.cleanup)}},{key:"render",value:function(){var e=this;return console.log("App is rerendered, current blocks:"),console.log(this.state.blocks),l.a.createElement(l.a.Fragment,null,l.a.createElement(C,{selectedBlock:this.state.selectedBlock,selectedBlockType:this.state.selectedBlockType,selectedBlockLanguage:this.state.selectedBlockLanguage,addBlockHandler:this.addBlockHandler,insertBlockAboveHandler:this.insertBlockAboveHandler,insertBlockBelowHandler:this.insertBlockBelowHandler,moveSelectedBlockUpHandler:this.moveSelectedBlockUpHandler,moveSelectedBlockDownHandler:this.moveSelectedBlockDownHandler,removeBlockHandler:this.removeBlockHandler,copySelectedBlockHandler:this.copySelectedBlockHandler,pasteBlockBelowHanlder:this.pasteBlockBelowHanlder,onBlockTypeSelectHandler:this.onBlockTypeSelectHandler,onBlockLanguageSelectHandler:this.onBlockLanguageSelectHandler,onDownloadClickHandler:this.onDownloadClickHandler,onCompileClickHandler:this.onCompileClickHandler}),l.a.createElement(L.a,{split:"horizontal",className:"main-area",onChange:function(t){console.log("The pane size is changing!!!"),console.log(t[1]),e.setState({consoleSize:t[1]})}},l.a.createElement("div",{className:"main-editor"},l.a.createElement("div",{className:"ui container"},l.a.createElement(O,{blocks:this.state.blocks,onBlockDropDownClick:this.onBlockDropDownClick,expandedBlocks:this.state.expandedBlocks,removeBlockHandler:this.removeBlockHandler,onBlockSelected:this.onBlockSelected,selectedBlock:this.state.selectedBlock,onBlocksUpdate:this.onBlocksUpdate,addOptionWithinBlockHandler:this.addOptionWithinBlockHandler,onOptionTabSelected:this.onOptionTabSelected,onOptionDeleteHandler:this.onOptionDeleteHandler,onBlockContentChangeHandler:this.onBlockContentChangeHandler}))),l.a.createElement(A.a,{initialSize:this.state.consoleSize,minSize:"30px"},l.a.createElement(z,{output:this.state.output,consoleSize:this.state.consoleSize,onConsoleSizeChangeHandler:this.onConsoleSizeChangeHandler}))))}}]),o}(l.a.Component);o(392);a.a.render(l.a.createElement(U,null),document.querySelector("#root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.29be89f1.chunk.js.map